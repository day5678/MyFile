快乐沃克工作分析:

1、功能性的模块
   IM、目标管理
2、整体架构重构

3、负责组员技术支持，代码Review


整体:
开始是MVC框架，后来由于太乱，搭建了MVP框架慢慢进行替换。

点滴:
任务:
目标管理:
新人破冰:
个人中心:
瞬间:
登陆:
首先打开启示页(SplashActivity)，获取权限，检查更新，检查本地用户信息(信息内包含token)，如果没问题则把token放到header当中，有问题重新获取，获取后把token放入header当中。


IM模块:

功能模块划分：
联系人、群组、Session(最近聊天)、消息、通知、网络（包含心跳、消息推送、长连接）、登陆

消息类型:
文本、AT文本、语音、文件、图片、红包、任务、未知

语音:
采用speex，Speex（读音[spi:ks]）是一套开源免费的、无专利保护的、针对语音设计的音频压缩格式，非常适用于互联网应用程序。
录音方式是用Android自带的AudioRecord，在录音过程中，直接使用SpeexEncoder来转换保存，后缀为".spx"
播放的时候直接用speexdec.decode()进行播放，AudioRecord设置播放模式(听筒，扬声器)
 

加入的功能:
AT功能、表情、红包、任务功能(消息和群组)、

修改功能:
把图片和音频上传到阿里云上


网络:
netty:使用TCP协议

netty和mina对比:
1、mina将内核和一些特性的联系过于紧密，使得用户在不需要这些特性的时候无法脱离，相比下性能会有所下降；netty解决了这个设计问题
2、netty基本的架构和mina几乎完全一样，使用时候思想上差不多；但是有很多细节的改进
3、netty比mina使用起来更简单，netty文档比较清晰


网络协议分析:
1、XMPP协议：
优点：协议成熟，强大，可扩展性强，并且有成熟的开源方案。
缺点：信息冗余量大（信息的格式是 XML），因而费流量，费电。多被pc时代的产品使用，不适合移动时代的IM产品，即使我们基于xmpp进行改进，简化握手过程，改进文件传输机制，但是它的基因决定了如何改进，
他都不适合移动互联网时代的IM产品。
2、MQTT协议：
定义: MQTT协议是IBM开发的一个即时通讯协议,为大量计算能力有限，且工作在低带宽、不可靠的网络的远程传感器和控制设备通讯而设计的协议。
优点：协议简洁轻巧，数据冗余量低。并且支持的设备从智能硬件到智能手机无所不包。适配多平台。
缺点：服务器端实现难度大，虽然已经有了C++版本的服务端组件，但是并不开源。 而且在推送数量较大时如何处理并发是十分考验后台人员的技术水平的。需要自己扩展好友，群组等功能。
3、私有协议：
优点：随心所欲，自己定义，流量小。
缺点：工作量巨大，扩展性差，需要考虑全面。
4、Protobuf协议：
优点：非常小、非常快、非常简单，一条消息数据用Protobuf序列化后的大小是JSON的1/10、XML格式的1/20、是二进制序列化的1/10。
缺点：不能表示复杂的数据结构，但是对于IM来讲，已经足够。


基于protobuf协议，Protobuf优势:
1.需要和其它系统做消息交换的，对消息大小很敏感的。那么protobuf适合了，它语言无关，消息空间相对xml和json等节省很多。
2.小数据的场合。如果你是大数据，用它并不适合。
3.项目语言是c++,java,python的，因为它们可以使用google的源生类库，序列化和反序列化的效率非常高。其它的语言需要第三方或者自己写，序列化和反序列化的效率不保证。
总体而言，protobuf还是非常好用的，被很多开源系统用于数据通信的工具，在google也是核心的基础库



心跳机制:
采用AlarmManager+Thread（比较稳定）方式
防止NAT超时(网络地址转换):大部分移动无线网络运营商都在链路一段时间没有数据通讯时，会淘汰 NAT 表中的对应项，造成链路中断(NAT超时的定义)。
TCP的KeepAlive只能保证两端的连接还存在，如果服务器端卡死，那么检测不出来，心跳可以检测出来，因为需要回执
http://www.52im.net/thread-281-1-1.html
http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0307/4033.html (介绍了NAT超时等资料)
http://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&mid=207243549&idx=1&sn=4ebe4beb8123f1b5ab58810ac8bc5994&scene=4#wechat_redirect (微信心跳机制)

WhatsApp：4分45秒
Line：WIFI下是3分20秒，手机网络是7分钟
中国移动3G和2G  5分钟
中国联通2G      5分钟
中国电信3G      大于28分钟

心跳重试机制


尽量不被系统关闭的方法:




动画！！！


View绘制(例如仪表盘)

怎么帮忙解决的通讯录的问题

语音怎么实现的？？？？？？